"use strict";function cov_2cn4q8tsrr(){var path="/home/walmir/ProjetosExtras/loldesign-back/src/services/callService.ts";var hash="c20a16154174709e2677765a151a17f38990ab14";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/walmir/ProjetosExtras/loldesign-back/src/services/callService.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:10,column:1}},"1":{start:{line:3,column:28},end:{line:3,column:110}},"2":{start:{line:3,column:91},end:{line:3,column:106}},"3":{start:{line:4,column:4},end:{line:9,column:7}},"4":{start:{line:5,column:36},end:{line:5,column:97}},"5":{start:{line:5,column:42},end:{line:5,column:70}},"6":{start:{line:5,column:85},end:{line:5,column:95}},"7":{start:{line:6,column:35},end:{line:6,column:100}},"8":{start:{line:6,column:41},end:{line:6,column:73}},"9":{start:{line:6,column:88},end:{line:6,column:98}},"10":{start:{line:7,column:32},end:{line:7,column:116}},"11":{start:{line:8,column:8},end:{line:8,column:78}},"12":{start:{line:11,column:0},end:{line:11,column:62}},"13":{start:{line:12,column:15},end:{line:12,column:40}},"14":{start:{line:13,column:16},end:{line:13,column:42}},"15":{start:{line:14,column:25},end:{line:14,column:59}},"16":{start:{line:15,column:22},end:{line:15,column:46}},"17":{start:{line:18,column:8},end:{line:34,column:11}},"18":{start:{line:19,column:58},end:{line:19,column:62}},"19":{start:{line:20,column:45},end:{line:20,column:87}},"20":{start:{line:21,column:27},end:{line:21,column:71}},"21":{start:{line:22,column:25},end:{line:22,column:127}},"22":{start:{line:23,column:33},end:{line:32,column:13}},"23":{start:{line:33,column:12},end:{line:33,column:32}},"24":{start:{line:38,column:8},end:{line:45,column:11}},"25":{start:{line:39,column:26},end:{line:43,column:14}},"26":{start:{line:44,column:12},end:{line:44,column:25}},"27":{start:{line:48,column:8},end:{line:54,column:11}},"28":{start:{line:49,column:29},end:{line:49,column:69}},"29":{start:{line:50,column:25},end:{line:52,column:20}},"30":{start:{line:53,column:12},end:{line:53,column:24}},"31":{start:{line:57,column:8},end:{line:63,column:11}},"32":{start:{line:58,column:12},end:{line:60,column:21}},"33":{start:{line:61,column:25},end:{line:61,column:51}},"34":{start:{line:62,column:12},end:{line:62,column:24}},"35":{start:{line:66,column:0},end:{line:66,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},"1":{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},"2":{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},"3":{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},"4":{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},"5":{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},"6":{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},"7":{name:"(anonymous_7)",decl:{start:{line:17,column:4},end:{line:17,column:5}},loc:{start:{line:17,column:24},end:{line:35,column:5}},line:17},"8":{name:"(anonymous_8)",decl:{start:{line:18,column:47},end:{line:18,column:48}},loc:{start:{line:18,column:60},end:{line:34,column:9}},line:18},"9":{name:"(anonymous_9)",decl:{start:{line:37,column:4},end:{line:37,column:5}},loc:{start:{line:37,column:18},end:{line:46,column:5}},line:37},"10":{name:"(anonymous_10)",decl:{start:{line:38,column:47},end:{line:38,column:48}},loc:{start:{line:38,column:60},end:{line:45,column:9}},line:38},"11":{name:"(anonymous_11)",decl:{start:{line:47,column:4},end:{line:47,column:5}},loc:{start:{line:47,column:23},end:{line:55,column:5}},line:47},"12":{name:"(anonymous_12)",decl:{start:{line:48,column:47},end:{line:48,column:48}},loc:{start:{line:48,column:60},end:{line:54,column:9}},line:48},"13":{name:"(anonymous_13)",decl:{start:{line:56,column:4},end:{line:56,column:5}},loc:{start:{line:56,column:34},end:{line:64,column:5}},line:56},"14":{name:"(anonymous_14)",decl:{start:{line:57,column:47},end:{line:57,column:48}},loc:{start:{line:57,column:60},end:{line:63,column:9}},line:57}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},"1":{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},"2":{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},"3":{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},"4":{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/home/walmir/ProjetosExtras/loldesign-back/src/services/callService.ts",sources:["/home/walmir/ProjetosExtras/loldesign-back/src/services/callService.ts"],names:[],mappings:";;;;;;;;;;;AAAA,yCAAkC;AAElC,2CAAmC;AACnC,4DAAyD;AACzD,+CAAwC;AAExC,MAAqB,WAAW;IAErB,MAAM,CAAO,MAAM,CAAE,IAAc;;YACtC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC;YAEnD,MAAM,EAAC,KAAK,EAAE,aAAa,EAAC,GAAG,IAAA,+BAAc,EAAC,IAAI,CAAC,CAAC;YAEpD,MAAM,MAAM,GAAG,MAAM,qBAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAElD,MAAM,IAAI,GAAG,MAAM,eAAI,CAAC,MAAM,CAAC,EAAC,MAAM,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,aAAa,EAAC,CAAC,CAAA;YAEtG,MAAM,YAAY,GAAG;gBACjB,EAAE,EAAE,IAAI,CAAC,EAAE;gBACX,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,MAAM;gBACN,OAAO;gBACP,IAAI;gBACJ,IAAI;gBACJ,KAAK;gBACL,aAAa;aACb,CAAC;YAEL,OAAO,YAAY,CAAC;QACtB,CAAC;KAAA;IAAA,CAAC;IAEK,MAAM,CAAO,IAAI;;YACpB,MAAM,KAAK,GAAG,MAAM,eAAI,CAAC,OAAO,CAAC;gBAC7B,OAAO,EAAE;oBACL,EAAC,KAAK,EAAE,cAAI,EAAE,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,UAAU,CAAC,EAAE;iBACxD;aACJ,CAAC,CAAC;YACH,OAAO,KAAK,CAAC;QACjB,CAAC;KAAA;IAEM,MAAM,CAAO,OAAO,CAAE,EAAS;;YACpC,MAAM,QAAQ,GAAG,MAAM,qBAAW,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YAChD,MAAM,IAAI,GAAG,MAAM,eAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE;oBACrC,MAAM,EAAE,QAAQ,CAAC,EAAE;iBACtB,EAAC,CAAC,CAAC;YACJ,OAAO,IAAI,CAAC;QAEd,CAAC;KAAA;IAEM,MAAM,CAAO,MAAM,CAAE,MAAc,EAAE,MAAc;;YAEtD,MAAM,eAAI,CAAC,OAAO,CAAC,EAAC,KAAK,EAAE;oBACvB,EAAE,EAAE,MAAM;iBACb,EAAC,CAAC,CAAC;YACJ,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;YACvC,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;CAGJ;AArDH,8BAqDG",sourcesContent:["import User from '../models/user';\nimport { CallData, ICall } from '../interfaces/callInterface';\nimport Call from '../models/calls';\nimport { calculatePrice } from '../Utils/calculatePrice';\nimport UserService from './userService';\n\nexport default class CallService  {\n      \n    public static async create (data: CallData): Promise<boolean | ICall>  {\n        const { origin, destiny, time, plan, name } = data;\n\n        const {price, priceWithPlan} = calculatePrice(data);        \n\n        const userId = await UserService.findByName(name);\n          \n        const call = await Call.create({userId: userId.id, origin, destiny, time, plan, price, priceWithPlan})                  \n      \n        const callFiltered = {\n            id: call.id,\n            userId: call.userId,\n            origin,\n            destiny,\n            time,\n            plan,\n            price,\n            priceWithPlan\n           };\n      \n        return callFiltered;\n      };\n\n      public static async read (): Promise<Call[]> {\n          const calls = await Call.findAll({\n              include: [\n                  {model: User, as: 'users', attributes: ['username'] }\n              ]\n          });\n          return calls;\n      }\n\n      public static async getById (id:number): Promise<Call[] | null>{\n        const response = await UserService.findById(id);\n        const call = await Call.findAll({ where: {\n            userId: response.id\n        }});\n        return call;\n\n      }\n\n      public static async delete (callId: number, userId: number): Promise<Call[] | null> {\n\n          await Call.destroy({where: {\n              id: callId\n          }});\n          const call = await this.getById(userId)\n          return call;\n      }\n\n\n  } \n\n\n\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c20a16154174709e2677765a151a17f38990ab14"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2cn4q8tsrr=function(){return actualCoverage;};}return actualCoverage;}cov_2cn4q8tsrr();var __awaiter=(cov_2cn4q8tsrr().s[0]++,(cov_2cn4q8tsrr().b[0][0]++,this)&&(cov_2cn4q8tsrr().b[0][1]++,this.__awaiter)||(cov_2cn4q8tsrr().b[0][2]++,function(thisArg,_arguments,P,generator){cov_2cn4q8tsrr().f[0]++;function adopt(value){cov_2cn4q8tsrr().f[1]++;cov_2cn4q8tsrr().s[1]++;return value instanceof P?(cov_2cn4q8tsrr().b[1][0]++,value):(cov_2cn4q8tsrr().b[1][1]++,new P(function(resolve){cov_2cn4q8tsrr().f[2]++;cov_2cn4q8tsrr().s[2]++;resolve(value);}));}cov_2cn4q8tsrr().s[3]++;return new((cov_2cn4q8tsrr().b[2][0]++,P)||(cov_2cn4q8tsrr().b[2][1]++,P=Promise))(function(resolve,reject){cov_2cn4q8tsrr().f[3]++;function fulfilled(value){cov_2cn4q8tsrr().f[4]++;cov_2cn4q8tsrr().s[4]++;try{cov_2cn4q8tsrr().s[5]++;step(generator.next(value));}catch(e){cov_2cn4q8tsrr().s[6]++;reject(e);}}function rejected(value){cov_2cn4q8tsrr().f[5]++;cov_2cn4q8tsrr().s[7]++;try{cov_2cn4q8tsrr().s[8]++;step(generator["throw"](value));}catch(e){cov_2cn4q8tsrr().s[9]++;reject(e);}}function step(result){cov_2cn4q8tsrr().f[6]++;cov_2cn4q8tsrr().s[10]++;result.done?(cov_2cn4q8tsrr().b[3][0]++,resolve(result.value)):(cov_2cn4q8tsrr().b[3][1]++,adopt(result.value).then(fulfilled,rejected));}cov_2cn4q8tsrr().s[11]++;step((generator=generator.apply(thisArg,(cov_2cn4q8tsrr().b[4][0]++,_arguments)||(cov_2cn4q8tsrr().b[4][1]++,[]))).next());});}));cov_2cn4q8tsrr().s[12]++;Object.defineProperty(exports,"__esModule",{value:true});const user_1=(cov_2cn4q8tsrr().s[13]++,require("../models/user"));const calls_1=(cov_2cn4q8tsrr().s[14]++,require("../models/calls"));const calculatePrice_1=(cov_2cn4q8tsrr().s[15]++,require("../Utils/calculatePrice"));const userService_1=(cov_2cn4q8tsrr().s[16]++,require("./userService"));class CallService{static create(data){cov_2cn4q8tsrr().f[7]++;cov_2cn4q8tsrr().s[17]++;return __awaiter(this,void 0,void 0,function*(){cov_2cn4q8tsrr().f[8]++;const{origin,destiny,time,plan,name}=(cov_2cn4q8tsrr().s[18]++,data);const{price,priceWithPlan}=(cov_2cn4q8tsrr().s[19]++,(0,calculatePrice_1.calculatePrice)(data));const userId=(cov_2cn4q8tsrr().s[20]++,yield userService_1.default.findByName(name));const call=(cov_2cn4q8tsrr().s[21]++,yield calls_1.default.create({userId:userId.id,origin,destiny,time,plan,price,priceWithPlan}));const callFiltered=(cov_2cn4q8tsrr().s[22]++,{id:call.id,userId:call.userId,origin,destiny,time,plan,price,priceWithPlan});cov_2cn4q8tsrr().s[23]++;return callFiltered;});}static read(){cov_2cn4q8tsrr().f[9]++;cov_2cn4q8tsrr().s[24]++;return __awaiter(this,void 0,void 0,function*(){cov_2cn4q8tsrr().f[10]++;const calls=(cov_2cn4q8tsrr().s[25]++,yield calls_1.default.findAll({include:[{model:user_1.default,as:'users',attributes:['username']}]}));cov_2cn4q8tsrr().s[26]++;return calls;});}static getById(id){cov_2cn4q8tsrr().f[11]++;cov_2cn4q8tsrr().s[27]++;return __awaiter(this,void 0,void 0,function*(){cov_2cn4q8tsrr().f[12]++;const response=(cov_2cn4q8tsrr().s[28]++,yield userService_1.default.findById(id));const call=(cov_2cn4q8tsrr().s[29]++,yield calls_1.default.findAll({where:{userId:response.id}}));cov_2cn4q8tsrr().s[30]++;return call;});}static delete(callId,userId){cov_2cn4q8tsrr().f[13]++;cov_2cn4q8tsrr().s[31]++;return __awaiter(this,void 0,void 0,function*(){cov_2cn4q8tsrr().f[14]++;cov_2cn4q8tsrr().s[32]++;yield calls_1.default.destroy({where:{id:callId}});const call=(cov_2cn4q8tsrr().s[33]++,yield this.getById(userId));cov_2cn4q8tsrr().s[34]++;return call;});}}cov_2cn4q8tsrr().s[35]++;exports.default=CallService;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvd2FsbWlyL1Byb2pldG9zRXh0cmFzL2xvbGRlc2lnbi1iYWNrL3NyYy9zZXJ2aWNlcy9jYWxsU2VydmljZS50cyIsInNvdXJjZXMiOlsiL2hvbWUvd2FsbWlyL1Byb2pldG9zRXh0cmFzL2xvbGRlc2lnbi1iYWNrL3NyYy9zZXJ2aWNlcy9jYWxsU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLHlDQUFrQztBQUVsQywyQ0FBbUM7QUFDbkMsNERBQXlEO0FBQ3pELCtDQUF3QztBQUV4QyxNQUFxQixXQUFXO0lBRXJCLE1BQU0sQ0FBTyxNQUFNLENBQUUsSUFBYzs7WUFDdEMsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7WUFFbkQsTUFBTSxFQUFDLEtBQUssRUFBRSxhQUFhLEVBQUMsR0FBRyxJQUFBLCtCQUFjLEVBQUMsSUFBSSxDQUFDLENBQUM7WUFFcEQsTUFBTSxNQUFNLEdBQUcsTUFBTSxxQkFBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVsRCxNQUFNLElBQUksR0FBRyxNQUFNLGVBQUksQ0FBQyxNQUFNLENBQUMsRUFBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBQyxDQUFDLENBQUE7WUFFdEcsTUFBTSxZQUFZLEdBQUc7Z0JBQ2pCLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDWCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07Z0JBQ25CLE1BQU07Z0JBQ04sT0FBTztnQkFDUCxJQUFJO2dCQUNKLElBQUk7Z0JBQ0osS0FBSztnQkFDTCxhQUFhO2FBQ2IsQ0FBQztZQUVMLE9BQU8sWUFBWSxDQUFDO1FBQ3RCLENBQUM7S0FBQTtJQUFBLENBQUM7SUFFSyxNQUFNLENBQU8sSUFBSTs7WUFDcEIsTUFBTSxLQUFLLEdBQUcsTUFBTSxlQUFJLENBQUMsT0FBTyxDQUFDO2dCQUM3QixPQUFPLEVBQUU7b0JBQ0wsRUFBQyxLQUFLLEVBQUUsY0FBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUU7aUJBQ3hEO2FBQ0osQ0FBQyxDQUFDO1lBQ0gsT0FBTyxLQUFLLENBQUM7UUFDakIsQ0FBQztLQUFBO0lBRU0sTUFBTSxDQUFPLE9BQU8sQ0FBRSxFQUFTOztZQUNwQyxNQUFNLFFBQVEsR0FBRyxNQUFNLHFCQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sSUFBSSxHQUFHLE1BQU0sZUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRTtvQkFDckMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2lCQUN0QixFQUFDLENBQUMsQ0FBQztZQUNKLE9BQU8sSUFBSSxDQUFDO1FBRWQsQ0FBQztLQUFBO0lBRU0sTUFBTSxDQUFPLE1BQU0sQ0FBRSxNQUFjLEVBQUUsTUFBYzs7WUFFdEQsTUFBTSxlQUFJLENBQUMsT0FBTyxDQUFDLEVBQUMsS0FBSyxFQUFFO29CQUN2QixFQUFFLEVBQUUsTUFBTTtpQkFDYixFQUFDLENBQUMsQ0FBQztZQUNKLE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUN2QyxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDO0tBQUE7Q0FHSjtBQXJESCw4QkFxREciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcic7XG5pbXBvcnQgeyBDYWxsRGF0YSwgSUNhbGwgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2NhbGxJbnRlcmZhY2UnO1xuaW1wb3J0IENhbGwgZnJvbSAnLi4vbW9kZWxzL2NhbGxzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVByaWNlIH0gZnJvbSAnLi4vVXRpbHMvY2FsY3VsYXRlUHJpY2UnO1xuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gJy4vdXNlclNlcnZpY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYWxsU2VydmljZSAge1xuICAgICAgXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGE6IENhbGxEYXRhKTogUHJvbWlzZTxib29sZWFuIHwgSUNhbGw+ICB7XG4gICAgICAgIGNvbnN0IHsgb3JpZ2luLCBkZXN0aW55LCB0aW1lLCBwbGFuLCBuYW1lIH0gPSBkYXRhO1xuXG4gICAgICAgIGNvbnN0IHtwcmljZSwgcHJpY2VXaXRoUGxhbn0gPSBjYWxjdWxhdGVQcmljZShkYXRhKTsgICAgICAgIFxuXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmZpbmRCeU5hbWUobmFtZSk7XG4gICAgICAgICAgXG4gICAgICAgIGNvbnN0IGNhbGwgPSBhd2FpdCBDYWxsLmNyZWF0ZSh7dXNlcklkOiB1c2VySWQuaWQsIG9yaWdpbiwgZGVzdGlueSwgdGltZSwgcGxhbiwgcHJpY2UsIHByaWNlV2l0aFBsYW59KSAgICAgICAgICAgICAgICAgIFxuICAgICAgXG4gICAgICAgIGNvbnN0IGNhbGxGaWx0ZXJlZCA9IHtcbiAgICAgICAgICAgIGlkOiBjYWxsLmlkLFxuICAgICAgICAgICAgdXNlcklkOiBjYWxsLnVzZXJJZCxcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIGRlc3RpbnksXG4gICAgICAgICAgICB0aW1lLFxuICAgICAgICAgICAgcGxhbixcbiAgICAgICAgICAgIHByaWNlLFxuICAgICAgICAgICAgcHJpY2VXaXRoUGxhblxuICAgICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIHJldHVybiBjYWxsRmlsdGVyZWQ7XG4gICAgICB9O1xuXG4gICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlYWQgKCk6IFByb21pc2U8Q2FsbFtdPiB7XG4gICAgICAgICAgY29uc3QgY2FsbHMgPSBhd2FpdCBDYWxsLmZpbmRBbGwoe1xuICAgICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgICB7bW9kZWw6IFVzZXIsIGFzOiAndXNlcnMnLCBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJ10gfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGNhbGxzO1xuICAgICAgfVxuXG4gICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEJ5SWQgKGlkOm51bWJlcik6IFByb21pc2U8Q2FsbFtdIHwgbnVsbD57XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgVXNlclNlcnZpY2UuZmluZEJ5SWQoaWQpO1xuICAgICAgICBjb25zdCBjYWxsID0gYXdhaXQgQ2FsbC5maW5kQWxsKHsgd2hlcmU6IHtcbiAgICAgICAgICAgIHVzZXJJZDogcmVzcG9uc2UuaWRcbiAgICAgICAgfX0pO1xuICAgICAgICByZXR1cm4gY2FsbDtcblxuICAgICAgfVxuXG4gICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlbGV0ZSAoY2FsbElkOiBudW1iZXIsIHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxDYWxsW10gfCBudWxsPiB7XG5cbiAgICAgICAgICBhd2FpdCBDYWxsLmRlc3Ryb3koe3doZXJlOiB7XG4gICAgICAgICAgICAgIGlkOiBjYWxsSWRcbiAgICAgICAgICB9fSk7XG4gICAgICAgICAgY29uc3QgY2FsbCA9IGF3YWl0IHRoaXMuZ2V0QnlJZCh1c2VySWQpXG4gICAgICAgICAgcmV0dXJuIGNhbGw7XG4gICAgICB9XG5cblxuICB9IFxuXG5cblxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ims4U0FNcUI7dStDQU5yQixrRUFFQSxvRUFDQSxxRkFDQSx3RUFFQSxLQUFxQkEsWUFBVyxDQUVGLE1BQU5DLE9BQU0sQ0FBRUMsSUFBRixDQUFnQiwwSEFDdEMsS0FBTSxDQUFFQyxNQUFGLENBQVVDLE9BQVYsQ0FBbUJDLElBQW5CLENBQXlCQyxJQUF6QixDQUErQkMsSUFBL0IsNEJBQXdDTCxJQUF4QyxDQUFOLENBRUEsS0FBTSxDQUFDTSxLQUFELENBQVFDLGFBQVIsNEJBQXlCLG9DQUFlUCxJQUFmLENBQXpCLENBQU4sQ0FFQSxLQUFNUSxPQUFNLDJCQUFHLEtBQU1DLHVCQUFZQyxVQUFaLENBQXVCTCxJQUF2QixDQUFULENBQVosQ0FFQSxLQUFNTSxLQUFJLDJCQUFHLEtBQU1DLGlCQUFLYixNQUFMLENBQVksQ0FBQ1MsTUFBTSxDQUFFQSxNQUFNLENBQUNLLEVBQWhCLENBQW9CWixNQUFwQixDQUE0QkMsT0FBNUIsQ0FBcUNDLElBQXJDLENBQTJDQyxJQUEzQyxDQUFpREUsS0FBakQsQ0FBd0RDLGFBQXhELENBQVosQ0FBVCxDQUFWLENBRUEsS0FBTU8sYUFBWSwyQkFBRyxDQUNqQkQsRUFBRSxDQUFFRixJQUFJLENBQUNFLEVBRFEsQ0FFakJMLE1BQU0sQ0FBRUcsSUFBSSxDQUFDSCxNQUZJLENBR2pCUCxNQUhpQixDQUlqQkMsT0FKaUIsQ0FLakJDLElBTGlCLENBTWpCQyxJQU5pQixDQU9qQkUsS0FQaUIsQ0FRakJDLGFBUmlCLENBQUgsQ0FBbEIsMEJBV0EsTUFBT08sYUFBUCxDQUNELElBRXVCLE1BQUpDLEtBQUksNkhBQ3BCLEtBQU1DLE1BQUssMkJBQUcsS0FBTUosaUJBQUtLLE9BQUwsQ0FBYSxDQUM3QkMsT0FBTyxDQUFFLENBQ0wsQ0FBQ0MsS0FBSyxDQUFFQyxjQUFSLENBQWNDLEVBQUUsQ0FBRSxPQUFsQixDQUEyQkMsVUFBVSxDQUFFLENBQUMsVUFBRCxDQUF2QyxDQURLLENBRG9CLENBQWIsQ0FBVCxDQUFYLDBCQUtBLE1BQU9OLE1BQVAsQ0FDSCxJQUUwQixNQUFQTyxRQUFPLENBQUVWLEVBQUYsQ0FBVyw0SEFDcEMsS0FBTVcsU0FBUSwyQkFBRyxLQUFNZix1QkFBWWdCLFFBQVosQ0FBcUJaLEVBQXJCLENBQVQsQ0FBZCxDQUNBLEtBQU1GLEtBQUksMkJBQUcsS0FBTUMsaUJBQUtLLE9BQUwsQ0FBYSxDQUFFUyxLQUFLLENBQUUsQ0FDckNsQixNQUFNLENBQUVnQixRQUFRLENBQUNYLEVBRG9CLENBQVQsQ0FBYixDQUFULENBQVYsMEJBR0EsTUFBT0YsS0FBUCxDQUVELElBRXlCLE1BQU5nQixPQUFNLENBQUVDLE1BQUYsQ0FBa0JwQixNQUFsQixDQUFnQyxxSkFFdEQsS0FBTUksaUJBQUtpQixPQUFMLENBQWEsQ0FBQ0gsS0FBSyxDQUFFLENBQ3ZCYixFQUFFLENBQUVlLE1BRG1CLENBQVIsQ0FBYixDQUFOLENBR0EsS0FBTWpCLEtBQUksMkJBQUcsS0FBTSxNQUFLWSxPQUFMLENBQWFmLE1BQWIsQ0FBVCxDQUFWLDBCQUNBLE1BQU9HLEtBQVAsQ0FDSCxJQWxEeUIsQyx5QkFBaENtQiIsIm5hbWVzIjpbIkNhbGxTZXJ2aWNlIiwiY3JlYXRlIiwiZGF0YSIsIm9yaWdpbiIsImRlc3RpbnkiLCJ0aW1lIiwicGxhbiIsIm5hbWUiLCJwcmljZSIsInByaWNlV2l0aFBsYW4iLCJ1c2VySWQiLCJ1c2VyU2VydmljZV8xIiwiZmluZEJ5TmFtZSIsImNhbGwiLCJjYWxsc18xIiwiaWQiLCJjYWxsRmlsdGVyZWQiLCJyZWFkIiwiY2FsbHMiLCJmaW5kQWxsIiwiaW5jbHVkZSIsIm1vZGVsIiwidXNlcl8xIiwiYXMiLCJhdHRyaWJ1dGVzIiwiZ2V0QnlJZCIsInJlc3BvbnNlIiwiZmluZEJ5SWQiLCJ3aGVyZSIsImRlbGV0ZSIsImNhbGxJZCIsImRlc3Ryb3kiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiL2hvbWUvd2FsbWlyL1Byb2pldG9zRXh0cmFzL2xvbGRlc2lnbi1iYWNrL3NyYy9zZXJ2aWNlcy9jYWxsU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlcic7XG5pbXBvcnQgeyBDYWxsRGF0YSwgSUNhbGwgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2NhbGxJbnRlcmZhY2UnO1xuaW1wb3J0IENhbGwgZnJvbSAnLi4vbW9kZWxzL2NhbGxzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVByaWNlIH0gZnJvbSAnLi4vVXRpbHMvY2FsY3VsYXRlUHJpY2UnO1xuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gJy4vdXNlclNlcnZpY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYWxsU2VydmljZSAge1xuICAgICAgXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGE6IENhbGxEYXRhKTogUHJvbWlzZTxib29sZWFuIHwgSUNhbGw+ICB7XG4gICAgICAgIGNvbnN0IHsgb3JpZ2luLCBkZXN0aW55LCB0aW1lLCBwbGFuLCBuYW1lIH0gPSBkYXRhO1xuXG4gICAgICAgIGNvbnN0IHtwcmljZSwgcHJpY2VXaXRoUGxhbn0gPSBjYWxjdWxhdGVQcmljZShkYXRhKTsgICAgICAgIFxuXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmZpbmRCeU5hbWUobmFtZSk7XG4gICAgICAgICAgXG4gICAgICAgIGNvbnN0IGNhbGwgPSBhd2FpdCBDYWxsLmNyZWF0ZSh7dXNlcklkOiB1c2VySWQuaWQsIG9yaWdpbiwgZGVzdGlueSwgdGltZSwgcGxhbiwgcHJpY2UsIHByaWNlV2l0aFBsYW59KSAgICAgICAgICAgICAgICAgIFxuICAgICAgXG4gICAgICAgIGNvbnN0IGNhbGxGaWx0ZXJlZCA9IHtcbiAgICAgICAgICAgIGlkOiBjYWxsLmlkLFxuICAgICAgICAgICAgdXNlcklkOiBjYWxsLnVzZXJJZCxcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIGRlc3RpbnksXG4gICAgICAgICAgICB0aW1lLFxuICAgICAgICAgICAgcGxhbixcbiAgICAgICAgICAgIHByaWNlLFxuICAgICAgICAgICAgcHJpY2VXaXRoUGxhblxuICAgICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIHJldHVybiBjYWxsRmlsdGVyZWQ7XG4gICAgICB9O1xuXG4gICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlYWQgKCk6IFByb21pc2U8Q2FsbFtdPiB7XG4gICAgICAgICAgY29uc3QgY2FsbHMgPSBhd2FpdCBDYWxsLmZpbmRBbGwoe1xuICAgICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgICAgICB7bW9kZWw6IFVzZXIsIGFzOiAndXNlcnMnLCBhdHRyaWJ1dGVzOiBbJ3VzZXJuYW1lJ10gfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGNhbGxzO1xuICAgICAgfVxuXG4gICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEJ5SWQgKGlkOm51bWJlcik6IFByb21pc2U8Q2FsbFtdIHwgbnVsbD57XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgVXNlclNlcnZpY2UuZmluZEJ5SWQoaWQpO1xuICAgICAgICBjb25zdCBjYWxsID0gYXdhaXQgQ2FsbC5maW5kQWxsKHsgd2hlcmU6IHtcbiAgICAgICAgICAgIHVzZXJJZDogcmVzcG9uc2UuaWRcbiAgICAgICAgfX0pO1xuICAgICAgICByZXR1cm4gY2FsbDtcblxuICAgICAgfVxuXG4gICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlbGV0ZSAoY2FsbElkOiBudW1iZXIsIHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxDYWxsW10gfCBudWxsPiB7XG5cbiAgICAgICAgICBhd2FpdCBDYWxsLmRlc3Ryb3koe3doZXJlOiB7XG4gICAgICAgICAgICAgIGlkOiBjYWxsSWRcbiAgICAgICAgICB9fSk7XG4gICAgICAgICAgY29uc3QgY2FsbCA9IGF3YWl0IHRoaXMuZ2V0QnlJZCh1c2VySWQpXG4gICAgICAgICAgcmV0dXJuIGNhbGw7XG4gICAgICB9XG5cblxuICB9IFxuXG5cblxuIl19