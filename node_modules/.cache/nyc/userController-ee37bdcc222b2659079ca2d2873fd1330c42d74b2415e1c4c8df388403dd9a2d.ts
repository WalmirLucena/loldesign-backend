"use strict";function cov_xbgjynnj3(){var path="/home/walmir/ProjetosExtras/loldesign-back/src/controllers/userController.ts";var hash="050e71096209cce36bf4b6edb4a3a6da2365f4b2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/walmir/ProjetosExtras/loldesign-back/src/controllers/userController.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:10,column:1}},"1":{start:{line:3,column:28},end:{line:3,column:110}},"2":{start:{line:3,column:91},end:{line:3,column:106}},"3":{start:{line:4,column:4},end:{line:9,column:7}},"4":{start:{line:5,column:36},end:{line:5,column:97}},"5":{start:{line:5,column:42},end:{line:5,column:70}},"6":{start:{line:5,column:85},end:{line:5,column:95}},"7":{start:{line:6,column:35},end:{line:6,column:100}},"8":{start:{line:6,column:41},end:{line:6,column:73}},"9":{start:{line:6,column:88},end:{line:6,column:98}},"10":{start:{line:7,column:32},end:{line:7,column:116}},"11":{start:{line:8,column:8},end:{line:8,column:78}},"12":{start:{line:11,column:0},end:{line:11,column:62}},"13":{start:{line:12,column:22},end:{line:12,column:56}},"14":{start:{line:13,column:21},end:{line:13,column:51}},"15":{start:{line:16,column:8},end:{line:28,column:11}},"16":{start:{line:17,column:12},end:{line:27,column:13}},"17":{start:{line:18,column:31},end:{line:18,column:74}},"18":{start:{line:19,column:16},end:{line:21,column:17}},"19":{start:{line:20,column:20},end:{line:20,column:122}},"20":{start:{line:22,column:16},end:{line:22,column:72}},"21":{start:{line:25,column:16},end:{line:26,column:47}},"22":{start:{line:32,column:8},end:{line:43,column:11}},"23":{start:{line:33,column:12},end:{line:42,column:13}},"24":{start:{line:34,column:32},end:{line:34,column:76}},"25":{start:{line:35,column:16},end:{line:36,column:116}},"26":{start:{line:36,column:20},end:{line:36,column:116}},"27":{start:{line:37,column:16},end:{line:37,column:78}},"28":{start:{line:40,column:16},end:{line:41,column:47}},"29":{start:{line:46,column:25},end:{line:46,column:33}},"30":{start:{line:47,column:27},end:{line:47,column:67}},"31":{start:{line:48,column:8},end:{line:50,column:9}},"32":{start:{line:49,column:12},end:{line:49,column:72}},"33":{start:{line:51,column:8},end:{line:51,column:22}},"34":{start:{line:54,column:0},end:{line:54,column:33}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:10,column:1}},line:2},"1":{name:"adopt",decl:{start:{line:3,column:13},end:{line:3,column:18}},loc:{start:{line:3,column:26},end:{line:3,column:112}},line:3},"2":{name:"(anonymous_2)",decl:{start:{line:3,column:70},end:{line:3,column:71}},loc:{start:{line:3,column:89},end:{line:3,column:108}},line:3},"3":{name:"(anonymous_3)",decl:{start:{line:4,column:36},end:{line:4,column:37}},loc:{start:{line:4,column:63},end:{line:9,column:5}},line:4},"4":{name:"fulfilled",decl:{start:{line:5,column:17},end:{line:5,column:26}},loc:{start:{line:5,column:34},end:{line:5,column:99}},line:5},"5":{name:"rejected",decl:{start:{line:6,column:17},end:{line:6,column:25}},loc:{start:{line:6,column:33},end:{line:6,column:102}},line:6},"6":{name:"step",decl:{start:{line:7,column:17},end:{line:7,column:21}},loc:{start:{line:7,column:30},end:{line:7,column:118}},line:7},"7":{name:"(anonymous_7)",decl:{start:{line:15,column:4},end:{line:15,column:5}},loc:{start:{line:15,column:27},end:{line:29,column:5}},line:15},"8":{name:"(anonymous_8)",decl:{start:{line:16,column:47},end:{line:16,column:48}},loc:{start:{line:16,column:60},end:{line:28,column:9}},line:16},"9":{name:"(anonymous_9)",decl:{start:{line:31,column:4},end:{line:31,column:5}},loc:{start:{line:31,column:28},end:{line:44,column:5}},line:31},"10":{name:"(anonymous_10)",decl:{start:{line:32,column:47},end:{line:32,column:48}},loc:{start:{line:32,column:60},end:{line:43,column:9}},line:32},"11":{name:"(anonymous_11)",decl:{start:{line:45,column:4},end:{line:45,column:5}},loc:{start:{line:45,column:36},end:{line:52,column:5}},line:45}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:10,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:10,column:1}}],line:2},"1":{loc:{start:{line:3,column:35},end:{line:3,column:109}},type:"cond-expr",locations:[{start:{line:3,column:56},end:{line:3,column:61}},{start:{line:3,column:64},end:{line:3,column:109}}],line:3},"2":{loc:{start:{line:4,column:16},end:{line:4,column:34}},type:"binary-expr",locations:[{start:{line:4,column:16},end:{line:4,column:17}},{start:{line:4,column:22},end:{line:4,column:33}}],line:4},"3":{loc:{start:{line:7,column:32},end:{line:7,column:115}},type:"cond-expr",locations:[{start:{line:7,column:46},end:{line:7,column:67}},{start:{line:7,column:70},end:{line:7,column:115}}],line:7},"4":{loc:{start:{line:8,column:51},end:{line:8,column:67}},type:"binary-expr",locations:[{start:{line:8,column:51},end:{line:8,column:61}},{start:{line:8,column:65},end:{line:8,column:67}}],line:8},"5":{loc:{start:{line:19,column:16},end:{line:21,column:17}},type:"if",locations:[{start:{line:19,column:16},end:{line:21,column:17}},{start:{line:19,column:16},end:{line:21,column:17}}],line:19},"6":{loc:{start:{line:35,column:16},end:{line:36,column:116}},type:"if",locations:[{start:{line:35,column:16},end:{line:36,column:116}},{start:{line:35,column:16},end:{line:36,column:116}}],line:35},"7":{loc:{start:{line:48,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:48,column:8},end:{line:50,column:9}},{start:{line:48,column:8},end:{line:50,column:9}}],line:48}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},inputSourceMap:{version:3,file:"/home/walmir/ProjetosExtras/loldesign-back/src/controllers/userController.ts",sources:["/home/walmir/ProjetosExtras/loldesign-back/src/controllers/userController.ts"],names:[],mappings:";;;;;;;;;;;AACA,yDAAkD;AAClD,oDAA6C;AAE7C,MAAqB,cAAc;IAExB,MAAM,CAAO,KAAK,CAAE,GAAY,EAAC,GAAa;;YAC7C,IAAI;gBACA,MAAM,MAAM,GAAG,MAAM,qBAAW,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAEjD,IAAI,CAAC,MAAM,EAAE;oBACX,OAAO,GAAG,CAAC,MAAM,CAAC,oBAAU,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC,CAAC;iBAC7F;gBAED,OAAO,GAAG,CAAC,MAAM,CAAC,oBAAU,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC/C;YAAC,OAAO,GAAG,EAAE;gBACZ,OAAO,GAAG,CAAC,MAAM,CAAC,oBAAU,CAAC,YAAY,CAAC;qBACvC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,CAAC;aAC9B;QACT,CAAC;KAAA;IAAA,CAAC;IAEG,MAAM,CAAO,MAAM,CAAE,GAAY,EAAC,GAAa;;YAClD,IAAI;gBACA,MAAM,OAAO,GAAG,MAAM,qBAAW,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAEnD,IAAG,CAAC,OAAO;oBAAE,OAAO,GAAG,CAAC,MAAM,CAAC,oBAAU,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,wBAAwB,EAAC,CAAC,CAAC;gBAEjG,OAAO,GAAG,CAAC,MAAM,CAAC,oBAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;aAEtD;YAAC,OAAO,GAAG,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,oBAAU,CAAC,YAAY,CAAC;qBACvC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,GAAG,EAAE,EAAE,CAAC,CAAC;aAC9B;QACT,CAAC;KAAA;IAEM,MAAM,CAAC,QAAQ,CAAE,GAAY,EAAE,GAAa,EAAE,IAAkB;QACnE,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC;QAC1B,MAAM,UAAU,GAAE,qBAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAEjD,IAAG,UAAU,CAAC,KAAK,EAAC;YAChB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,UAAU,CAAC,KAAK,CAAC,OAAO,EAAC,CAAC,CAAA;SAC5D;QAED,OAAO,IAAI,EAAE,CAAA;IACjB,CAAC;CAEF;AA1CD,iCA0CC",sourcesContent:["import { NextFunction, Request, Response } from 'express';\nimport UserService from '../services/userService';\nimport StatusCode from '../Utils/StatusCode';\n\nexport default class UserController  {\n    \n    public static async login (req: Request,res: Response): Promise<typeof res>  {\n            try {\n                const result = await UserService.login(req.body);\n            \n                if (!result) {\n                  return res.status(StatusCode.UNAUTHORIZED).json({ message: 'Incorrect email or password' });\n                }\n            \n                return res.status(StatusCode.OK).json(result);\n              } catch (err) {\n                return res.status(StatusCode.UNAUTHORIZED)\n                  .json({ error: `${err}` });\n              }\n      };\n\n    public static async create (req: Request,res: Response): Promise<typeof res> {\n        try {\n            const newUser = await UserService.create(req.body);\n\n            if(!newUser) return res.status(StatusCode.BAD_REQUEST).json({message: 'User already registred'});\n\n            return res.status(StatusCode.CREATED).json(newUser)\n            \n        } catch (err) {\n            return res.status(StatusCode.UNAUTHORIZED)\n              .json({ error: `${err}` });\n          }\n  }\n\n  public static validate (req: Request, res: Response, next: NextFunction) {\n      const userInfo = req.body;\n      const validation= UserService.validate(userInfo);\n\n      if(validation.error){\n          res.status(500).json({message: validation.error.message})\n      }\n\n      return next()\n  }\n  \n}\n\n\n\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"050e71096209cce36bf4b6edb4a3a6da2365f4b2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_xbgjynnj3=function(){return actualCoverage;};}return actualCoverage;}cov_xbgjynnj3();var __awaiter=(cov_xbgjynnj3().s[0]++,(cov_xbgjynnj3().b[0][0]++,this)&&(cov_xbgjynnj3().b[0][1]++,this.__awaiter)||(cov_xbgjynnj3().b[0][2]++,function(thisArg,_arguments,P,generator){cov_xbgjynnj3().f[0]++;function adopt(value){cov_xbgjynnj3().f[1]++;cov_xbgjynnj3().s[1]++;return value instanceof P?(cov_xbgjynnj3().b[1][0]++,value):(cov_xbgjynnj3().b[1][1]++,new P(function(resolve){cov_xbgjynnj3().f[2]++;cov_xbgjynnj3().s[2]++;resolve(value);}));}cov_xbgjynnj3().s[3]++;return new((cov_xbgjynnj3().b[2][0]++,P)||(cov_xbgjynnj3().b[2][1]++,P=Promise))(function(resolve,reject){cov_xbgjynnj3().f[3]++;function fulfilled(value){cov_xbgjynnj3().f[4]++;cov_xbgjynnj3().s[4]++;try{cov_xbgjynnj3().s[5]++;step(generator.next(value));}catch(e){cov_xbgjynnj3().s[6]++;reject(e);}}function rejected(value){cov_xbgjynnj3().f[5]++;cov_xbgjynnj3().s[7]++;try{cov_xbgjynnj3().s[8]++;step(generator["throw"](value));}catch(e){cov_xbgjynnj3().s[9]++;reject(e);}}function step(result){cov_xbgjynnj3().f[6]++;cov_xbgjynnj3().s[10]++;result.done?(cov_xbgjynnj3().b[3][0]++,resolve(result.value)):(cov_xbgjynnj3().b[3][1]++,adopt(result.value).then(fulfilled,rejected));}cov_xbgjynnj3().s[11]++;step((generator=generator.apply(thisArg,(cov_xbgjynnj3().b[4][0]++,_arguments)||(cov_xbgjynnj3().b[4][1]++,[]))).next());});}));cov_xbgjynnj3().s[12]++;Object.defineProperty(exports,"__esModule",{value:true});const userService_1=(cov_xbgjynnj3().s[13]++,require("../services/userService"));const StatusCode_1=(cov_xbgjynnj3().s[14]++,require("../Utils/StatusCode"));class UserController{static login(req,res){cov_xbgjynnj3().f[7]++;cov_xbgjynnj3().s[15]++;return __awaiter(this,void 0,void 0,function*(){cov_xbgjynnj3().f[8]++;cov_xbgjynnj3().s[16]++;try{const result=(cov_xbgjynnj3().s[17]++,yield userService_1.default.login(req.body));cov_xbgjynnj3().s[18]++;if(!result){cov_xbgjynnj3().b[5][0]++;cov_xbgjynnj3().s[19]++;return res.status(StatusCode_1.default.UNAUTHORIZED).json({message:'Incorrect email or password'});}else{cov_xbgjynnj3().b[5][1]++;}cov_xbgjynnj3().s[20]++;return res.status(StatusCode_1.default.OK).json(result);}catch(err){cov_xbgjynnj3().s[21]++;return res.status(StatusCode_1.default.UNAUTHORIZED).json({error:`${err}`});}});}static create(req,res){cov_xbgjynnj3().f[9]++;cov_xbgjynnj3().s[22]++;return __awaiter(this,void 0,void 0,function*(){cov_xbgjynnj3().f[10]++;cov_xbgjynnj3().s[23]++;try{const newUser=(cov_xbgjynnj3().s[24]++,yield userService_1.default.create(req.body));cov_xbgjynnj3().s[25]++;if(!newUser){cov_xbgjynnj3().b[6][0]++;cov_xbgjynnj3().s[26]++;return res.status(StatusCode_1.default.BAD_REQUEST).json({message:'User already registred'});}else{cov_xbgjynnj3().b[6][1]++;}cov_xbgjynnj3().s[27]++;return res.status(StatusCode_1.default.CREATED).json(newUser);}catch(err){cov_xbgjynnj3().s[28]++;return res.status(StatusCode_1.default.UNAUTHORIZED).json({error:`${err}`});}});}static validate(req,res,next){cov_xbgjynnj3().f[11]++;const userInfo=(cov_xbgjynnj3().s[29]++,req.body);const validation=(cov_xbgjynnj3().s[30]++,userService_1.default.validate(userInfo));cov_xbgjynnj3().s[31]++;if(validation.error){cov_xbgjynnj3().b[7][0]++;cov_xbgjynnj3().s[32]++;res.status(500).json({message:validation.error.message});}else{cov_xbgjynnj3().b[7][1]++;}cov_xbgjynnj3().s[33]++;return next();}}cov_xbgjynnj3().s[34]++;exports.default=UserController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvd2FsbWlyL1Byb2pldG9zRXh0cmFzL2xvbGRlc2lnbi1iYWNrL3NyYy9jb250cm9sbGVycy91c2VyQ29udHJvbGxlci50cyIsInNvdXJjZXMiOlsiL2hvbWUvd2FsbWlyL1Byb2pldG9zRXh0cmFzL2xvbGRlc2lnbi1iYWNrL3NyYy9jb250cm9sbGVycy91c2VyQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBLHlEQUFrRDtBQUNsRCxvREFBNkM7QUFFN0MsTUFBcUIsY0FBYztJQUV4QixNQUFNLENBQU8sS0FBSyxDQUFFLEdBQVksRUFBQyxHQUFhOztZQUM3QyxJQUFJO2dCQUNBLE1BQU0sTUFBTSxHQUFHLE1BQU0scUJBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUVqRCxJQUFJLENBQUMsTUFBTSxFQUFFO29CQUNYLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxvQkFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSw2QkFBNkIsRUFBRSxDQUFDLENBQUM7aUJBQzdGO2dCQUVELE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxvQkFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUMvQztZQUFDLE9BQU8sR0FBRyxFQUFFO2dCQUNaLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxvQkFBVSxDQUFDLFlBQVksQ0FBQztxQkFDdkMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQzlCO1FBQ1QsQ0FBQztLQUFBO0lBQUEsQ0FBQztJQUVHLE1BQU0sQ0FBTyxNQUFNLENBQUUsR0FBWSxFQUFDLEdBQWE7O1lBQ2xELElBQUk7Z0JBQ0EsTUFBTSxPQUFPLEdBQUcsTUFBTSxxQkFBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBRW5ELElBQUcsQ0FBQyxPQUFPO29CQUFFLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxvQkFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFDLE9BQU8sRUFBRSx3QkFBd0IsRUFBQyxDQUFDLENBQUM7Z0JBRWpHLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxvQkFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTthQUV0RDtZQUFDLE9BQU8sR0FBRyxFQUFFO2dCQUNWLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxvQkFBVSxDQUFDLFlBQVksQ0FBQztxQkFDdkMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQzlCO1FBQ1QsQ0FBQztLQUFBO0lBRU0sTUFBTSxDQUFDLFFBQVEsQ0FBRSxHQUFZLEVBQUUsR0FBYSxFQUFFLElBQWtCO1FBQ25FLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7UUFDMUIsTUFBTSxVQUFVLEdBQUUscUJBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFakQsSUFBRyxVQUFVLENBQUMsS0FBSyxFQUFDO1lBQ2hCLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFDLENBQUMsQ0FBQTtTQUM1RDtRQUVELE9BQU8sSUFBSSxFQUFFLENBQUE7SUFDakIsQ0FBQztDQUVGO0FBMUNELGlDQTBDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy91c2VyU2VydmljZSc7XG5pbXBvcnQgU3RhdHVzQ29kZSBmcm9tICcuLi9VdGlscy9TdGF0dXNDb2RlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckNvbnRyb2xsZXIgIHtcbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvZ2luIChyZXE6IFJlcXVlc3QscmVzOiBSZXNwb25zZSk6IFByb21pc2U8dHlwZW9mIHJlcz4gIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlclNlcnZpY2UubG9naW4ocmVxLmJvZHkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKFN0YXR1c0NvZGUuVU5BVVRIT1JJWkVEKS5qc29uKHsgbWVzc2FnZTogJ0luY29ycmVjdCBlbWFpbCBvciBwYXNzd29yZCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoU3RhdHVzQ29kZS5PSykuanNvbihyZXN1bHQpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyhTdGF0dXNDb2RlLlVOQVVUSE9SSVpFRClcbiAgICAgICAgICAgICAgICAgIC5qc29uKHsgZXJyb3I6IGAke2Vycn1gIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGUgKHJlcTogUmVxdWVzdCxyZXM6IFJlc3BvbnNlKTogUHJvbWlzZTx0eXBlb2YgcmVzPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgVXNlclNlcnZpY2UuY3JlYXRlKHJlcS5ib2R5KTtcblxuICAgICAgICAgICAgaWYoIW5ld1VzZXIpIHJldHVybiByZXMuc3RhdHVzKFN0YXR1c0NvZGUuQkFEX1JFUVVFU1QpLmpzb24oe21lc3NhZ2U6ICdVc2VyIGFscmVhZHkgcmVnaXN0cmVkJ30pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyhTdGF0dXNDb2RlLkNSRUFURUQpLmpzb24obmV3VXNlcilcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKFN0YXR1c0NvZGUuVU5BVVRIT1JJWkVEKVxuICAgICAgICAgICAgICAuanNvbih7IGVycm9yOiBgJHtlcnJ9YCB9KTtcbiAgICAgICAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHZhbGlkYXRlIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xuICAgICAgY29uc3QgdXNlckluZm8gPSByZXEuYm9keTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb249IFVzZXJTZXJ2aWNlLnZhbGlkYXRlKHVzZXJJbmZvKTtcblxuICAgICAgaWYodmFsaWRhdGlvbi5lcnJvcil7XG4gICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6IHZhbGlkYXRpb24uZXJyb3IubWVzc2FnZX0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXh0KClcbiAgfVxuICBcbn1cblxuXG5cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6IjtzOENBQ0EsaUZBQ0EsNEVBRUEsS0FBcUJBLGVBQWMsQ0FFTixNQUFMQyxNQUFLLENBQUVDLEdBQUYsQ0FBZUMsR0FBZixDQUE0QiwrSUFDN0MsR0FBSSxDQUNBLEtBQU1DLE9BQU0sMEJBQUcsS0FBTUMsdUJBQVlKLEtBQVosQ0FBa0JDLEdBQUcsQ0FBQ0ksSUFBdEIsQ0FBVCxDQUFaLENBREEsd0JBR0EsR0FBSSxDQUFDRixNQUFMLENBQWEsbURBQ1gsTUFBT0QsSUFBRyxDQUFDSSxNQUFKLENBQVdDLHFCQUFXQyxZQUF0QixFQUFvQ0MsSUFBcEMsQ0FBeUMsQ0FBRUMsT0FBTyxDQUFFLDZCQUFYLENBQXpDLENBQVAsQ0FDRCxDQUZELGdDQUhBLHdCQU9BLE1BQU9SLElBQUcsQ0FBQ0ksTUFBSixDQUFXQyxxQkFBV0ksRUFBdEIsRUFBMEJGLElBQTFCLENBQStCTixNQUEvQixDQUFQLENBQ0QsQ0FBQyxNQUFPUyxHQUFQLENBQVkseUJBQ1osTUFBT1YsSUFBRyxDQUFDSSxNQUFKLENBQVdDLHFCQUFXQyxZQUF0QixFQUNKQyxJQURJLENBQ0MsQ0FBRUksS0FBSyxDQUFFLEdBQUdELEdBQUcsRUFBZixDQURELENBQVAsQ0FFRCxDQUNSLElBRXVCLE1BQU5FLE9BQU0sQ0FBRWIsR0FBRixDQUFlQyxHQUFmLENBQTRCLGdKQUNsRCxHQUFJLENBQ0EsS0FBTWEsUUFBTywwQkFBRyxLQUFNWCx1QkFBWVUsTUFBWixDQUFtQmIsR0FBRyxDQUFDSSxJQUF2QixDQUFULENBQWIsQ0FEQSx3QkFHQSxHQUFHLENBQUNVLE9BQUosQ0FBYSx5REFBT2IsSUFBRyxDQUFDSSxNQUFKLENBQVdDLHFCQUFXUyxXQUF0QixFQUFtQ1AsSUFBbkMsQ0FBd0MsQ0FBQ0MsT0FBTyxDQUFFLHdCQUFWLENBQXhDLENBQVAsQ0FBb0YsQ0FBakcsZ0NBSEEsd0JBS0EsTUFBT1IsSUFBRyxDQUFDSSxNQUFKLENBQVdDLHFCQUFXVSxPQUF0QixFQUErQlIsSUFBL0IsQ0FBb0NNLE9BQXBDLENBQVAsQ0FFSCxDQUFDLE1BQU9ILEdBQVAsQ0FBWSx5QkFDVixNQUFPVixJQUFHLENBQUNJLE1BQUosQ0FBV0MscUJBQVdDLFlBQXRCLEVBQ0pDLElBREksQ0FDQyxDQUFFSSxLQUFLLENBQUUsR0FBR0QsR0FBRyxFQUFmLENBREQsQ0FBUCxDQUVELENBQ1IsSUFFcUIsTUFBUk0sU0FBUSxDQUFFakIsR0FBRixDQUFnQkMsR0FBaEIsQ0FBK0JpQixJQUEvQixDQUFpRCx5QkFDbkUsS0FBTUMsU0FBUSwwQkFBR25CLEdBQUcsQ0FBQ0ksSUFBUCxDQUFkLENBQ0EsS0FBTWdCLFdBQVUsMEJBQUVqQixzQkFBWWMsUUFBWixDQUFxQkUsUUFBckIsQ0FBRixDQUFoQixDQUZtRSx3QkFJbkUsR0FBR0MsVUFBVSxDQUFDUixLQUFkLENBQW9CLG1EQUNoQlgsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkcsSUFBaEIsQ0FBcUIsQ0FBQ0MsT0FBTyxDQUFFVyxVQUFVLENBQUNSLEtBQVgsQ0FBaUJILE9BQTNCLENBQXJCLEVBQ0gsQ0FGRCxnQ0FKbUUsd0JBUW5FLE1BQU9TLEtBQUksRUFBWCxDQUNILENBeENnQyxDLHdCQUFuQ0ciLCJuYW1lcyI6WyJVc2VyQ29udHJvbGxlciIsImxvZ2luIiwicmVxIiwicmVzIiwicmVzdWx0IiwidXNlclNlcnZpY2VfMSIsImJvZHkiLCJzdGF0dXMiLCJTdGF0dXNDb2RlXzEiLCJVTkFVVEhPUklaRUQiLCJqc29uIiwibWVzc2FnZSIsIk9LIiwiZXJyIiwiZXJyb3IiLCJjcmVhdGUiLCJuZXdVc2VyIiwiQkFEX1JFUVVFU1QiLCJDUkVBVEVEIiwidmFsaWRhdGUiLCJuZXh0IiwidXNlckluZm8iLCJ2YWxpZGF0aW9uIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi9ob21lL3dhbG1pci9Qcm9qZXRvc0V4dHJhcy9sb2xkZXNpZ24tYmFjay9zcmMvY29udHJvbGxlcnMvdXNlckNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL3VzZXJTZXJ2aWNlJztcbmltcG9ydCBTdGF0dXNDb2RlIGZyb20gJy4uL1V0aWxzL1N0YXR1c0NvZGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyQ29udHJvbGxlciAge1xuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9naW4gKHJlcTogUmVxdWVzdCxyZXM6IFJlc3BvbnNlKTogUHJvbWlzZTx0eXBlb2YgcmVzPiAge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS5sb2dpbihyZXEuYm9keSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoU3RhdHVzQ29kZS5VTkFVVEhPUklaRUQpLmpzb24oeyBtZXNzYWdlOiAnSW5jb3JyZWN0IGVtYWlsIG9yIHBhc3N3b3JkJyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyhTdGF0dXNDb2RlLk9LKS5qc29uKHJlc3VsdCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKFN0YXR1c0NvZGUuVU5BVVRIT1JJWkVEKVxuICAgICAgICAgICAgICAgICAgLmpzb24oeyBlcnJvcjogYCR7ZXJyfWAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZSAocmVxOiBSZXF1ZXN0LHJlczogUmVzcG9uc2UpOiBQcm9taXNlPHR5cGVvZiByZXM+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBVc2VyU2VydmljZS5jcmVhdGUocmVxLmJvZHkpO1xuXG4gICAgICAgICAgICBpZighbmV3VXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoU3RhdHVzQ29kZS5CQURfUkVRVUVTVCkuanNvbih7bWVzc2FnZTogJ1VzZXIgYWxyZWFkeSByZWdpc3RyZWQnfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKFN0YXR1c0NvZGUuQ1JFQVRFRCkuanNvbihuZXdVc2VyKVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoU3RhdHVzQ29kZS5VTkFVVEhPUklaRUQpXG4gICAgICAgICAgICAgIC5qc29uKHsgZXJyb3I6IGAke2Vycn1gIH0pO1xuICAgICAgICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgdmFsaWRhdGUgKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG4gICAgICBjb25zdCB1c2VySW5mbyA9IHJlcS5ib2R5O1xuICAgICAgY29uc3QgdmFsaWRhdGlvbj0gVXNlclNlcnZpY2UudmFsaWRhdGUodXNlckluZm8pO1xuXG4gICAgICBpZih2YWxpZGF0aW9uLmVycm9yKXtcbiAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTogdmFsaWRhdGlvbi5lcnJvci5tZXNzYWdlfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHQoKVxuICB9XG4gIFxufVxuXG5cblxuIl19